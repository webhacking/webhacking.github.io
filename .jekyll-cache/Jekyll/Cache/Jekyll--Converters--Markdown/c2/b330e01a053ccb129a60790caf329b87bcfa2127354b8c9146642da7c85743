I"/<p>ìš°ì„  í¬ìŠ¤íŒ…í•˜ê¸° ì• ì„œ, í•´ë‹¹ í¬ìŠ¤íŒ… ìì²´ê°€ í˜¼ì ê°œë…ì„ ì´í•´í•˜ìëŠ” ëª©ì ì´ ê°•í•˜ê¸°ì— ìì„¸í•œ ì„¤ëª…ì„ ë‹´ê³ ìˆì§€ì•ŠìŠµë‹ˆë‹¤.</p>

<p><a href="http://supervisord.org/index.html">Supervisor ê³µí™ˆ</a>ì—ì„œ ì•„ì£¼ ìì„¸í•˜ê²Œ ì„¤ëª…í•˜ê³ ìˆìœ¼ë‹ˆ, ì…ë¬¸ìœ¼ë¡œ ë³´ëŠ”
ê°œë°œìë“¤ì´ë¼ë©´ í•œë²ˆ ì°¸ê³ í•´ë³´ì‹œê¸¸ ë°”ëë‹ˆë‹¤.</p>

<p>ì¶”ê°€ ì½ì–´ë³´ì‹  ë¶„ë“¤ì¤‘ì— ì˜¤íƒ€ë‚˜ ì˜ëª»ëœ ë¶€ë¶„ ì°¾ìœ¼ì‹  ë¶„ ìˆìœ¼ì‹œë‹¤ë©´ ëŒ“ê¸€ ë¶€íƒë“œë¦½ë‹ˆë‹¤. â€œí˜¼ì ì‚¬ìš©í•˜ëŠ” ì¼ê¸°â€ ë¼ ìƒê°í•˜ê³  ì‘ì„±í–ˆê¸°ì—.. ë‹¤ì†Œ
ë¬¸ì¥ ìì²´ê°€ ë§¤ë„ëŸ½ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p><a href="http://blog.hax0r.info/526">Gearman </a>ë•ë¶„ì—
<a href="http://supervisord.org/">Supervisor</a>ì— ëŒ€í•´ ì¢€ ì•Œê²Œë˜ì—ˆë‹¤.</p>

<p>ì•„ë˜ ì‚¬ì§„ì€ ìµœê·¼ ì£¼ë§ë§ˆë‹¤ ì¡°ê¸ˆ ì”© ë§Œë“¤ê³ ìˆëŠ” í”„ë¡œì íŠ¸ì´ë‹¤.</p>

<p>í•¨ìˆ˜ ë„¤ì´ë°ì€ ì €ê²Œ ìµœì„ ì´ì—ˆë‹¤;</p>

<p>Gearmanì„ ì‚¬ìš©í•˜ë©´ì„œ ë‚˜ë¦„ ë§Œì¡±í•´í•˜ê³ ìˆë˜ ì°°ë‚˜ì—, ê°‘ì‘ìŠ¤ë ˆ ì›Œì»¤ê°€ ê³„ì† ì£½ì—ˆë‹¤.</p>

<p><code class="highlighter-rouge">ê°‘ì‘ìŠ¤ë ˆ = ë²„ê·¸ì‹¬ìŒã…‹</code> ë”°ë¼ì„œ ì›Œì»¤ê°€ í•´ë‹¹ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰ì‹œí‚¤ê³  ì˜¤ë¥˜êµ¬ë¬¸ì„ ë§Œë‚˜ ì£½ì€ ê²ƒ ê°™ì•˜ë‹¤.</p>

<p>ë¡œê·¸ë¥¼ ì‚´í´ë³´ë‹ˆ ì›Œì»¤ê°€ ì˜¤ë¥˜ê°€ ë°œìƒí•¨ì—ë„ ì§€ì†ì ìœ¼ë¡œ ë„ì›Œì„œ ì„œë²„ ë©”ëª¨ë¦¬ ìƒë‹¹ìˆ˜ë¥¼ ì°¨ì§€í•˜ê³ ìˆì—ˆë‹¤.</p>

<p>stackoverflowì˜ í•´ë‹¹ ë²„ê·¸ë¥¼ ìš”ì•½ í›„ ê²€ìƒ‰í•˜ë‹¤ê°€ <code class="highlighter-rouge">Supervisor</code>ë¥¼ ì•Œê²Œë˜ì—ˆê³  ì§€ê¸ˆì€ ì˜ ì‚¬ìš©í•˜ê³ ìˆë‹¤.</p>

<p>í˜„ì¬ëŠ” ì›Œì»¤ê°€ ì£½ì„ë•Œë§ˆë‹¤ Supervisorë¥¼ í†µí•´ì„œ í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‹¤ì‹œ ë„ìš°ëŠ” ë°©ë²•ìœ¼ë¡œ ë³€ê²½í–ˆë‹¤.</p>

<p>ê·¼ë° ê·¸ (í”„ë¡œì„¸ìŠ¤ = ì›Œì»¤)ë¥¼ ê³„ì† ë„ì›Œë„ ì–´ì°¨í”¼ ê³„ì† ì£½ëŠ” ì›Œì»¤ê°€ ìˆë‹¤. ëŒ€í‘œì ìœ¼ë¡œ êµ¬ë¬¸ì—ëŸ¬ê°€ ìˆì„ ê²ƒ ê°™ë‹¤.</p>

<p>ê°œë°œìê°€ ì´ë¥¼ ë°œê²¬í•˜ê³  ìˆ˜ì •í•œë‹¤ë©´ ëŠ¦ê²Œë‚˜ë§ˆ ì¬ ì‹¤í–‰ë˜ê² ì§€ë§Œ ê·¸ê²Œ ì•„ë‹ˆë¼ë©´ â€¦ ì´ ë˜í•œ ë©”ëª¨ë¦¬ë¥¼ ì—„ì²­ ì°¨ì§€í•  ê±°ë‹¤.</p>

<p>ì„œë²„ê°€ ëª…ë ¹ì–´ í•œ ì¤„ ì œëŒ€ë¡œ ëª» ì¹˜ëŠ” ì†ë„ë¡œ ê°€ëŠ”ê±°ë‹¤.. SupervisorëŠ” ì¼ì • ìˆ˜ ì‹¤í–‰ í›„ ì•ˆë˜ë©´ í¬ê¸°í•œë‹¤ê³  í•œë‹¤. (íœ´..)</p>

<p><img src="/assets/images/posts/662/27680050576A400420CEC5.JPEG" alt="" /></p>

<p>Supervisorì€ ê°„ë‹¨í•˜ê²Œ ë§í•˜ìë©´ _í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ ì‹œìŠ¤í…œ_ì´ë‹¤.</p>

<p>í•´ë‹¹ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ë”°ë¡œ ì„¤ì¹˜ë°©ë²•ì´ë‚˜ ì„¤ì • ë“±ì— ëŒ€í•´ì„œ ê¹Šê²Œ ì„¤ëª…í•˜ì§€ ì•ŠëŠ”ë‹¤.</p>

<p>ê°„ë‹¨í•œ ê°œìš”ì™€ ê°œë… ì •ë„ë§Œ ì§šê³  ë„˜ì–´ê°€ëŠ” í¬ìŠ¤íŠ¸ì´ë‹¤.</p>

<p>ì„¤ì¹˜ ê´€ë ¨í•´ì„œ ê¶ê¸ˆí•˜ë‹¤ë©´ í•´ë‹¹ í¬ìŠ¤íŠ¸(<a href="http://supervisord.org/installing.html">Installing -
</a><a href="http://supervisord.org/installing.html">Supervisor 3.3.0
documentation</a>)ë¥¼ ì°¸ê³ í•œë‹¤.</p>

<p>Supervisor is a client/server system that allows its users to <strong>control a
number of processes</strong> <strong>on UNIX-like operating systems</strong>.</p>

<p>It was inspired by the following:</p>

<p>ì•„ë˜ëŠ” Supervisor ì˜ ëª‡ê°€ì§€ íŠ¹ì§•ì´ë‹¤.</p>

<ol>
  <li>Simple
    1. Supervisor is configured through a simple INI-style config file thatâ€™s easy to learn. It provides many per-process options that make your life easier like restarting failed processes and automatic log rotation.</li>
  <li>Centralized
    1. Supervisor provides you with one place to start, stop, and monitor your processes. Processes can be controlled individually or in groups. You can configure Supervisor to provide a local or remote command line and web interface.</li>
  <li>Efficient
    1. Supervisor starts its subprocesses via fork/exec and subprocesses donâ€™t daemonize. The operating system signals Supervisor immediately when a process terminates, unlike some solutions that rely on troublesome PID files and periodic polling to restart failed processes.</li>
  <li>Compatible
    1. Supervisor works on just about everything except for Windows. It is tested and supported on Linux, Mac OS X, Solaris, and FreeBSD. It is written entirely in Python, so installation does not require a C compiler.</li>
  <li>Proven
    1. While Supervisor is very actively developed today, it is not new software. Supervisor has been around for years and is already in use on many servers.</li>
</ol>

<p>Supervisor ì˜ ì„¤ì •ì€ ë§¤ìš° ê°„ë‹¨í•˜ë‹¤. ë­ ì´ì „ì— í¬ìŠ¤íŒ…í•œ Travis ë³´ë‹¤ëŠ” ì–‘í˜¸í•œ ê±° ê°™ë‹¤.</p>

<p>ê·¸ ì˜ˆë¡œ ë‚´ê°€ ì„¤ì •í•œ ë‚´ìš©ì„ ì°¸ê³ í•œë‹¤. [í”„ë¡œê·¸ë¨:*ë„¤ì„] í˜•íƒœë¡œ ì‘ì„±í•˜ë©´ëœë‹¤.</p>

<p>command ë¥¼ ë³´ë©´, node í˜•íƒœ(node.js ê´€ë ¨ í”„ë¡œê·¸ë¨ì´ê¸°ì—..)ë¡œ ê¸°ì¬ë˜ì–´ìˆëŠ”ë°, ì € ë¶€ë¶„ì€ ìì‹ ì´ ì‹¤í–‰í•  í”„ë¡œê·¸ë¨ì˜ ë§ê²Œ
ì•Œë§ê²Œ ìˆ˜ì •í•˜ë©´ëœë‹¤. (íŒŒì´ì¬,php ë“±)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[program:nodehook]command=/usr/bin/node /srv/http.jsdirectory=/srvautostart=trueautorestart=truestartretries=3stderr_logfile=/var/log/webhook/nodehook.err.logstdout_logfile=/var/log/webhook/nodehook.out.loguser=www-dataenvironment=SECRET_PASSPHRASE='this is secret',SECRET_TWO='another secret'
</code></pre></div></div>

<p>ì´ìš©ìì—ê²Œ í”„ë¡œì„¸ìŠ¤ ëª¨ë‹ˆí„°ë¥¼ ì œê³µí•´ì¤€ë‹¤. cli ë„ ìˆê³  ì›¹ í˜ì´ì§€ë„ìˆë‹¤.</p>

<p>í•„ìš”ì—ë”°ë¼ ì•„ë˜ ì‚¬ì§„ì„ ì°¸ê³ í•œë‹¤. ë˜í•œ Supervisor ì‚¬ìš©í•´ë„ ë ê¹Œ. ê³ ë¯¼í•˜ê³ ìˆë‹¤ë©´ SupervisoríŠ¹ì§•ì— ë‚˜ì™€ìˆë“¯ ì´ë¯¸ ì˜¤ë˜ì „ë¶€í„°
ìˆ˜ë§ì€ ì„œë²„ì—ì„œ ì‚¬ìš©í•˜ê³ ìˆë‹¤. ë¦´ë¦¬ì¦ˆ ë²„ì „ì„ ë³´ë©´ ì•Œê² ì§€ë§Œ í˜„ì¬ë„ ê¾¸ì¤€íˆ ì§„í–‰ì¤‘ì´ê³  ì–´ëŠì •ë„ ì•ˆì •ëœ ìƒíƒœì´ë‹¤. í˜¸í™˜ì„±ì€ ë”±íˆ ë§í•  í•„ìš”ì—†ì–´ì„œ
ë§ì•ˆí•˜ê² ë‹¤. ê±°ì˜ ë‹¤ë˜ê¸° ë•Œë¬¸ì´ë‹¤.</p>

<p>ì¢Œì¸¡ì˜ ë³´ë©´ í”„ë¡œì„¸ìŠ¤ ìƒíƒœê°€ ë‚˜ì™€ìˆë‹¤.</p>

<p>í”„ë¡œì„¸ìŠ¤ ìƒíƒœì˜ ì¢…ë¥˜ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</p>

<ul>
  <li>STOPPED
    <ul>
      <li>The process has been stopped due to a stop request or has never been started.</li>
    </ul>
  </li>
  <li>STARTING
    <ul>
      <li>The process is starting due to a start request.</li>
    </ul>
  </li>
  <li>RUNNING
    <ul>
      <li>The process is running.</li>
    </ul>
  </li>
  <li>BACKOFF
    <ul>
      <li>The process entered the STARTING state but subsequently exited too quickly to move to the RUNNING state.</li>
    </ul>
  </li>
  <li>STOPPING
    <ul>
      <li>The process is stopping due to a stop request.</li>
    </ul>
  </li>
  <li>EXITED
    <ul>
      <li>The process exited from the RUNNING state (expectedly or unexpectedly).</li>
    </ul>
  </li>
  <li>FATAL
    <ul>
      <li>The process could not be started successfully.</li>
    </ul>
  </li>
  <li>UNKNOWN
    <ul>
      <li>The process is in an unknown state (supervisord programming error).</li>
    </ul>
  </li>
</ul>

<p><img src="/assets/images/posts/662/21131148576B36E11E361F.JPEG" alt="" /></p>

<p>ì•„ë˜ëŠ” Subprocess State Transition ê·¸ë˜í”„ì´ë‹¤.</p>

<p>ìƒí™©ì— ë”°ë¼ì„œ ì°¸ê³ í•˜ê¸¸ ë°”ë€ë‹¤.</p>

<p><img src="/assets/images/posts/662/23622950576A3F1F20F5C1.PNG" alt="" /></p>

:ET