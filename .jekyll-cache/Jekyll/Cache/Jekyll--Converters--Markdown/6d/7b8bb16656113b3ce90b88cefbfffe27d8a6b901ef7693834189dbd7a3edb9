I"
<p>DB ì„¤ê³„, í•„ìš” INDEX ìƒì„±, Optimizer ì‹¤í–‰ ê³„íš ìƒì„± ë“±ì´ ì›í™œí•œ ê²½ìš°</p>

<p>ë‚¨ì€ ì„±ëŠ¥ ìµœì í™” ì‘ì—… ì¤‘ í•˜ë‚˜ëŠ” DISK I/O ë¥¼ ì¤„ì´ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.</p>

<p>MySQL ì—ì„œ InnoDB ì—”ì§„ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° Barracuda Formatì„ ì‚¬ìš©í•˜ì—¬ DBì˜ í¬ê¸°ë¥¼ 50% ì´ìƒ ê°ì†Œ ì‹œí‚¬ ìˆ˜
ìˆìŠµë‹ˆë‹¤.</p>

<p>í•´ë‹¹ í¬ë§·ì„ ì ì¬ì ì†Œì— í™œìš©ë§Œ ì˜ í•œë‹¤ë©´ ë°ì´í„° ì €ì¥ ê³µê°„ì„ í¬ê²Œ ì ˆì•½í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>(MySQL 5.1 ì´í•˜ ë²„ì „ì€ ë”°ë¡œ í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•´ì•¼í•œë‹¤.)</p>

<ul>
  <li>ë‹¨ Barracuda ëŠ” ë°ì´í„° ì••ì¶• ë° í•´ì œí•˜ê¸° ìœ„í•´ CPU ìì›ì„ ì†Œëª¨í•œë‹¤ëŠ” ê²ƒì„ ìœ ì˜í•´ì•¼í•©ë‹ˆë‹¤.</li>
</ul>

<p>ê¸°ë³¸ì ìœ¼ë¡œ InnoDB ì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì • ë˜ì–´ìˆëŠ” íŒŒì¼ í¬ë§·ì€ â€œAntelopeâ€ ì…ë‹ˆë‹¤.</p>

<p>Antelope ê³¼ Barracuda ì˜ ì°¨ì´ì ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>

<p>Barracuda íŒŒì¼ í¬ë§·ì—ì„œëŠ” â€œCompactâ€ ì´ì™¸ì— â€œDynamicâ€, â€œCompressedâ€ Row í¬ë§·ì„ ì§€ì›í•©ë‹ˆë‹¤.</p>

<p>Compact</p>

<p>ê°€ë³€ ê¸¸ì´ ì»¬ëŸ¼ì˜ 767 byte ê¹Œì§€ë§Œ B-Treeì— ì €ì¥í•˜ê³ , ë‚˜ë¨¸ì§€ëŠ” Off-Pageì— ì €ì¥</p>

<p>Dynamic</p>

<p>Page ì‚¬ì´ì¦ˆì™€, Row ì‚¬ì´ì¦ˆë¥¼ ê³ ë ¤í•˜ì—¬, ê¸¸ì´ê°€ ê¸´ ì»¬ëŸ¼ë“¤ì€ ì „ì²´ë¥¼ Off-Pageì— ì €ì¥í•˜ë˜, B-Treeì—ëŠ” 20 byteì˜
í¬ì¸í„°ë§Œ ì €ì¥ (ì „ì²´ ì¹¼ëŸ¼ì„ ë°ì´í„° íŠ¸ë¦¬ì— ë„£ë„ë¡ ì‹œë„í•˜ê³  ê·¸ë ‡ì§€ ëª»í•œë‹¤ë©´ ë³„ë„ì˜ í˜ì´ì§€ì— ì €ì¥í•œë‹¤.)</p>

<p>Compressed</p>

<p>Dynamicê³¼ ê±°ì˜ ìœ ì‚¬í•˜ì§€ë§Œ KEY_BLOCK_SIZE ì˜µì…˜ì„ í†µí•´ 16KBì˜ ë°ì´í„° Pageë¥¼ ì••ì¶• ê°€ëŠ¥</p>

<p>(KEY_BLOCK_SIZE = 1, 2, 4, 8, 16 ê¸°ë³¸ê°’ : 8)</p>

<p>KEY_BLOCK_SIZE = 16ì¸ ê²½ìš° ê¸°ë³¸ì ìœ¼ë¡œ ë°ì´í„° Pageë¥¼ ì••ì¶•í•˜ì§€ ì•Šì§€ë§Œ, VARCHAR, TEXT, BLOB ì»¬ëŸ¼ë§Œ
ì„ íƒì ìœ¼ë¡œ ì••ì¶•</p>

<p>ì•„ë˜ ì„¤ì • íŠœí† ë¦¬ì–¼ì„ ì°¸ê³ í•˜ì—¬ ì„¤ì •í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql&gt; select version();+------------+| version() Â |+------------+| 5.5.21-log |+------------+1 row in set (0.00 sec)mysql&gt; show variables like "%innodb_file%";# ê¸°ë³¸ ê°’ì€ Antelope ì…ë‹ˆë‹¤.+--------------------------+----------+Â Â Variable_name Â  Â  Â  Â  Â  Â | Value Â  Â |+--------------------------+----------+| innodb_file_format Â  Â  Â  | Antelope || innodb_file_format_check | ON Â  Â  Â  || innodb_file_format_max Â  | Antelope || innodb_file_per_table Â  Â | ON Â  Â  Â  |+--------------------------+----------+Â 4 rows in set (0.00 sec)mysql&gt; SET GLOBAL innodb_file_format = barracuda;Query OK, 0 rows affected (0.00 sec)mysql&gt; show variables like "%innodb_file%";+--------------------------+-----------+| Variable_name Â  Â  Â  Â  Â  Â | Value Â  Â  |+--------------------------+-----------+| innodb_file_format Â  Â  Â  | Barracuda || innodb_file_format_check | ON Â  Â  Â  Â || innodb_file_format_max Â  | Antelope Â || innodb_file_per_table Â  Â | ON Â  Â  Â  Â |+--------------------------+-----------+4 rows in set (0.00 sec)mysql&gt; SET GLOBAL innodb_file_format_max = barracuda;Query OK, 0 rows affected (0.00 sec)mysql&gt; show variables like "%innodb_file%";+--------------------------+-----------+| Variable_name Â  Â  Â  Â  Â  Â | Value Â  Â  |+--------------------------+-----------+| innodb_file_format Â  Â  Â  | Barracuda || innodb_file_format_check | ON Â  Â  Â  Â || innodb_file_format_max Â  | Barracuda || innodb_file_per_table Â  Â | ON Â  Â  Â  Â |+--------------------------+-----------+4 rows in set (0.00 sec)
</code></pre></div></div>

<p><strong>ì°¸ê³ </strong></p>

<ul>
  <li><a href="https://dev.mysql.com/doc/refman/5.5/en/innodb-file-format.html">InnoDB File-Format Management</a></li>
  <li><a href="http://www.tocker.ca/2013/10/31/benchmarking-innodb-page-compression-performance.html">Benchmarking InnoDB page compression performance</a></li>
</ul>

:ET